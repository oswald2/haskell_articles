%% Buchvorlage unter Verwendung der Book-Klasse des KOMA-Script      %%
%% Basierend auf einer TeXNicCenter-Vorlage von Mark Müller          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Wählen Sie die Optionen aus, indem Sie % vor der Option entfernen  
% Dokumentation des KOMA-Script-Packets: scrguide

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Optionen zum Layout des Buchs                                     %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[
%a5paper,							% alle weiteren Papierformat einstellbar
%landscape,						% Querformat
12pt,								% Schriftgröße (12pt, 11pt (Standard))
%BCOR1cm,							% Bindekorrektur, bspw. 1 cm
%DIVcalc,							% führt die Satzspiegelberechnung neu aus
%											  s. scrguide 2.4
%oneside,							% einseitiges Layout
%twocolumn,						% zweispaltiger Satz
%openany,							% Kapitel können auch auf linken Seiten beginnen
%halfparskip*,				% Absatzformatierung s. scrguide 3.1
%headsepline,					% Trennline zum Seitenkopf	
%footsepline,					% Trennline zum Seitenfuß
%notitlepage,					% in-page-Titel, keine eigene Titelseite
%chapterprefix,				% vor Kapitelüberschrift wird "Kapitel Nummer" gesetzt
%appendixprefix,				% Anhang wird "Anhang" vor die Überschrift gesetzt 
%normalheadings,			% Überschriften etwas kleiner (smallheadings)
idxtotoc,						% Index im Inhaltsverzeichnis
liststotoc,					% Abb.- und Tab.verzeichnis im Inhalt
bibtotoc,						% Literaturverzeichnis im Inhalt
%leqno,								% Nummerierung von Gleichungen links
%fleqn,								% Ausgabe von Gleichungen linksbündig
%draft								% überlangen Zeilen in Ausgabe gekennzeichnet
]
{scrbook}

%\pagestyle{empty}		% keine Kopf und Fußzeile (k. Seitenzahl)
%\pagestyle{headings}	% lebender Kolumnentitel  

%% Fonts für pdfLaTeX, falls keine cm-super-Fonts installiert%%%%%%%%%

%% Packages für Grafiken & Abbildungen %%%%%%%%%%%%%%%%%%%%%%
\usepackage[pdftex]{graphicx} %%Grafiken in pdfLaTeX



%% optischer Randausgleich, falls pdflatex verwandt %%%%%%%%%%%%%%%%%%%
\usepackage[activate]{pdfcprot}				

\usepackage[dvipsnames]{xcolor}


\usepackage[T1]{fontenc}   % T1-Kodierung des Zeichensatzes
\usepackage[utf8]{inputenc} % Eingabekodierung (Linux)
\usepackage{
  ,soul         % Sperren, Unterstreichen, Durchstreichen ...
  ,array        % Erweiterungen für Tabellen
  ,booktabs     %       "        "      "
  ,supertabular % Mehrseitige Tabellen
  ,longtable    %      "          "    
  ,colortbl     % Farben in Tabellenzellen
  ,tabularx
  ,textcomp     % Zusätzliche (Sonder)Zeichen
  ,natbib       % Formatierung der Zitate
  ,calc         % Rechnen mit LaTeX-Längen und -Zählern
  ,url          % URLs setzen
  ,tocloft      % Verzeichnisse (TOC, LOF, LOT) formatieren
  ,graphicx     % Grafiken einbinden
  ,paralist     % Zusätzliche Listen-Umgebungen
  ,multicol     % Mehrspaltensatz
  ,ragged2e     % Bessere Trennung bei Flattersatz
  ,pst-3d       % Für das Beispiel der verschrägten Aufrechten
  ,pst-pdf      % PostScript-Code mit pdflatex verwenden
  ,fixltx2e     % Korrigiert Fehler und erweitert LaTeX2e
  ,cmap         % verbessert das Kopieren aus PDF-Anzeigeprogrammen und
                % das Durchsuchen von PDF-Dateien 
  ,makeidx      % Index-Erzeugung
}



\usepackage{textcomp}
\usepackage{lmodern}
\usepackage[sc, osf]{mathpazo}
\usepackage{amsmath}

%% deutsche Anpassung %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[english]{babel}		
\usepackage{multirow,bigdelim} 
\usepackage[paper=a4paper,left=25mm,right=25mm,top=20mm,bottom=28mm]{geometry} 
\usepackage{niceframe}
\usepackage[english]{varioref}      % »Intelligente« Querverweise
\usepackage{tabulary}

\usepackage{wrapfig}


% Neue Option »C« für longtable, um Tabellen > \textwidth auf der Seite
% zu zentrieren (Heiko Oberdiek in <d892mm$9nq$1@news.BelWue.DE>) unter
% Berücksichtigung des im Rand zur Verfügung stehenden Freiraums (Markus
% Kohm in <1780717.PVTQaRvHTA@mjk.komascript.de>). 
\makeatletter
\let\ORG@LT@array\LT@array
\def\LT@array[#1]{%
  \if C#1%
    \setlength{\@tempdima}{\oddsidemargin}
    \addtolength{\@tempdima}{1in}
    \LTleft=0pt plus 1fill minus \@tempdima
    \LTright=\LTleft
    \expandafter\ORG@LT@array\expandafter[\expandafter x\expandafter]%
  \else
    \@ReturnAfterFi{%
      \ORG@LT@array[{#1}]%
    }%
  \fi
}
\long\def\@ReturnAfterFi#1\fi{\fi#1}
\makeatother



% um Tabellenspalten mit Flattersatz zu setzen, muss \\ vor
% (z.B.) \raggedright geschützt werden:
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
%
% Spalten mit Flattersatz:
% Linksbündig:\chapter{Massage}
\newcolumntype{L}[1]{>{\PreserveBackslash\RaggedRight}m{#1}}
\newcolumntype{M}[1]{>{\PreserveBackslash\RaggedRight}p{#1}}
% Rechtsbündig (nicht verwendet im Dokument):
\newcolumntype{R}[1]{>{\PreserveBackslash\RaggedLeft}m{#1}}
\newcolumntype{S}[1]{>{\PreserveBackslash\RaggedLeft}p{#1}}
% Zentriert (nicht verwendet im Dokument):
\newcolumntype{Z}[1]{>{\PreserveBackslash\Centering}m{#1}}
\newcolumntype{A}[1]{>{\PreserveBackslash\Centering}p{#1}}

% Tabellen mit grauem Header und grauer hline am Ende und entsprechend
% eingestellten Schriften (in diesem Fall nur fett); Verwendung über
% \hdrow (s.u.)
%
% Linksbündig:
\newcolumntype{H}{>{\fontseries{b}\selectfont%
    \columncolor[gray]{.8}[6pt][0pt]}l}
% Zentriert (nicht verwendet im Dokument):
\newcolumntype{I}{>{\fontseries{b}\selectfont%
    \columncolor[gray]{.8}[6pt][0pt]}c}
% Rechtsbündig (nicht verwendet im Dokument):
\newcolumntype{J}{>{\fontseries{b}\selectfont%
    \columncolor[gray]{.8}[6pt][0pt]}r}
%
\newcommand{\hdrow}[2]{%
  \multicolumn{1}{#1@{}}{%
    \raisebox{.1mm}{% Ausrichtung der Beschriftung
      #2%
    }\rule{0pt}{4mm}}% unsichtbare Linie, die die Kopfzeile höher macht
} 

% Alternative ohne \multicolumn und \columncolor, direkt über \rowcolor:
%\newcommand{\Hdrow}[1]{\rowcolor[gray]{.8}#1 \\\addlinespace}\chapter{Massage}
\newenvironment{tabelle}[2][c]{%
  \renewcommand{\arraystretch}{1.2} % Größere Abstände zwischen Zeilen
  \sffamily\small                   % Serifenlose und kleine Schrift
  \begin{longtable}[#1]{#2}
  }
  {\end{longtable}\renewcommand{\arraystretch}{1}% Abstände wieder
                                                 % zurücksetzen 
  \normalsize\rmfamily % Schrift wieder zurücksetzen
  }

% Auch »Abbildung« und nicht nur die Nummer wird zum Link (abgeleitet
% aus Posting von Heiko Oberdiek (d09n5p$9md$1@news.BelWue.DE);
% Verwendung: In \abbvref{label} ist ein Beispiel dargestellt
\providecommand*{\abbvrefname}{Abbildung}
\newcommand*{\abbvref}[1]{%
  \hyperref[#1]{\abbvrefname}\vref{#1}%
}



\usepackage[%
  breaklinks               % Links »überstehen« Zeilenumbruch
  ,backref                 % Backlinks im Literaturverzeichnis
  ,colorlinks              % Links erhalten Farben statt Kästen
  ,citecolor=myblue        % Farbe für Zitate
  ,linkcolor=myblue        % beeinflusst Inhaltsverzeichnis und Seitenzahlen
  ,urlcolor=myblue         % Farbe für URLs
  ,bookmarks               % Erzeugung von Bookmarks für PDF-Viewer
  ,bookmarksnumbered       % Nummerierung der Bookmarks
  ,hyperfootnotes=false    % Keine Links auf Fußnoten
  ,pdfpagelabels 
  ,pdftex
  ,pdftitle={Haskell Articles}
  ,pdfsubject={A List of Haskell Articles on good design, good testing}
  ,pdfauthor={Michael Oswald}
  ,pdfcreator={LaTeX, hyperref, KOMA-Script}
  ,pdfstartview=FitH,      % Dokument wird »Fit Width« geöffnet
  ,pdfpagemode=UseOutlines % Bookmarks im Viewer anzeigen
  ,pdfdisplaydoctitle=true
  ,bookmarksopenlevel=2    % Gliederungstiefe der Bookmarks
  ] 
  {hyperref}               % PDF automatisch mit Links versehen und weitere
                           % Hypertext-Funktionalität ermöglichen
% Farbdefinitionen:
\definecolor{myblue}{rgb}{0,.1,.6}
\definecolor{myblue2}{rgb}{0,.4,.6}
\definecolor{grau}{gray}{.4}
\definecolor{ecru}{rgb}{1,.98823529411764705,.95686274509803921568}

\usepackage[figure]{hypcap} % Links auf Gleitumgebungen springen nicht
                            % zur Beschriftung, sondern zum Anfang der
                            % Gleitumgebung 

\usepackage{minted}
                   
                   
                   
% 3-spaltiger Index
\makeatletter
\renewenvironment{theindex}{%
  \begin{multicols}{3}[\section*{\indexname}][19\baselineskip]%
    \setlength{\parindent}{0pt}\pagestyle{plain}\let\item\@idxitem}
  {\end{multicols}}
\makeatother

% Zweispaltige Fußnoten
\usepackage{dblfnote}
% Keine hochgestellten Ziffern in der Fußnote (KOMA-Script-spezifisch):
\deffootnote[1.5em]{0pt}{1em}{\makebox[1.5em][l]{\bfseries\thefootnotemark}} 
% Abstand zwischen Fußnoten vergrößern:
\setlength{\footnotesep}{.85\baselineskip}

\renewcommand{\footnoterule}{}             % Keine Trennlinie zur Fußnote 
\addtolength{\skip\footins}{\baselineskip} % Abstand Text <-> Fußnote
% Fußnoten immer ganz unten auf einer \raggedbottom-Seite
\usepackage{fnpos}

\raggedbottom     % Variable Seitenhöhen zulassen



%% Bibliographiestil %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{natbib}

\newcommand{\todo}{\colorbox{yellow}{TODO} }


\newcommand{\doublepic}[4]{%

\begin{figure}[htbp]
	\begin{minipage}[b]{0.5\linewidth}
		\includegraphics[width=.95\linewidth]{pics/#1}
		\caption{#2}
		\label{fig:#1}
	\end{minipage}
	\begin{minipage}[b]{0.5\linewidth}
		\centering
		\vfill
		\includegraphics[width=.95\linewidth]{pics/#3}
		\vfill
		\caption{#4}
		\label{fig:#3}
	\end{minipage}
\end{figure}
}




\colorlet{tableheader}{Bittersweet}
\colorlet{tableline}{YellowOrange}

\font\teng=teng10

\addtokomafont{caption}{\itshape}
\addtokomafont{captionlabel}{\itshape}

\begin{document}
%% Dateiendungen für Grafiken %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ==> Sie können hiermit die Dateiendung einer Grafik weglassen.
%% ==> Aus "\includegraphics{titel.eps}" wird "\includegraphics{titel}".
%% ==> Wenn Sie nunmehr 2 inhaltsgleiche Grafiken "titel.eps" und
%% ==> "titel.pdf" erstellen, wird jeweils nur die Grafik eingebunden,
%% ==> die von ihrem Compiler verarbeitEine integrale Analyse der politischen 
%% ==> pdfLaTeX benutzt "titel.pdf". LaTeX benutzt "titel.eps".
\ifpdf
	\DeclareGraphicsExtensions{.pdf,.jpg,.png}
\else
	\DeclareGraphicsExtensions{.eps}
\fi

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\includegraphics[wid%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Ihr Buch                                                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Schmutztitel-Seite %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\extratitle{Schmutztitel}

%% eigene Titelseitengestaltung %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    
\begin{titlepage}
%Einsetzen der TXC Vorlage "Deckblatt" möglich

\rule{\textwidth}{0pt}


\vspace{6\baselineskip}

%\begin{center}
%\includegraphics[width=0.4\textwidth]{pics/Amatsu_Ryoho_Flower_Final_Doc}
%\begin{minipage}[b]{0.3\linewidth}
%		\includegraphics[width=.95\linewidth]{pics/Amatsu_Integral.png}
%	\end{minipage}
%\end{center}

\vspace{7\baselineskip}

\begin{flushright}

\Huge\textsc{\textit{A List of Haskell Articles on good design, good testing}}

\rule{\textwidth}{4pt}

% \Large \amrint

\large William Yao

\large Matt Parsons

\large David Luposchainsky

\large Alexis King

\large Japer Van der Jeugt

\large Tom Ellis

\large Michael Snoyman

\large Sandy Maguire

\large Oskar Wickström

\large Scott Wlaschin

\large Hillel Wayne

\end{flushright}

\vfill


\tiny \copyright{} by above mentioned authors, compilation by M. Oswald. You may freely copy and distribute this document.

%\texttt{\input{git_hash.tex}}

\end{titlepage}

%% Angaben zur Standardformatierung des Titels %%%%%%%%%%%%%%%%%%%%%%%%
%\titlehead{Titelkopf}
%\subject{Typisierung}
%\title{Der Name Ihrer Arbeit}
%\author{Ihr Name}
%\and{Der Name des Co-Autoren}
%\thanks{Fußnote}			% entspr. \footnote im Fließtext
%\date{}							% falls anderes, als das aktuelle gewünscht
%\publishers{Herausgeber}

%% Rückseite der Titelseite %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\uppertitleback{Titelrückseitenkopf}
%\lowertitleback{Titelrückseitenfuß}

%% Widmungsseite %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\dedication{Widmung}

%\maketitle 						% Titelei wird erzeugt

%% Erzeugung von Verzeichnissen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
{\sffamily
\noindent This document is a compilation of web articles about Haskell, which was put together by William Yao. I was interested to have this in one document and not spread via different web pages, so I compiled them together in this document. 

\vfill

\begin{flushleft}
The homepage for this document is: 
\url{https://github.com/oswald2/haskell_articles}
\end{flushleft}
}

\newpage


\tableofcontents			% Inhaltsverzeichnis
\listoffigures				% Abbildungsverzeichnis
\listoftables				% Tabellenverzeichnis


%% Der Text %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Introduction by William Yao}

For a language that's beloved for its ability to guide the structure of programs into being easier to understand, easier to maintain, and easier to get correct, there's not a lot of resources on how to best use the tools that Haskell provides. Lots of terms and buzzwords, not a lot of in-depth practical guidance on best practices. So I've put together a list of community blog posts and articles on the theme of \emph{building more correct programs}.

These are split roughly in two groups: posts about how best to leverage the type system to eliminate errors before they even occur, while striking a balance between type complexity and usability; and posts about using Haskell's best-in-class testing facilities to shore up what can't be typed\footnote{Or at least, not typed easily}. Despite the hype around Haskell's type system, it's unlikely in a program of any complexity that you'll be able to completely eliminate the possibility of bugs and errors purely through the type system alone. Using both types \emph{and} tests gives you a better power-to-weight ratio for building maintainable, bug-free programs than either does alone.

Note that I'm explicitly not including articles and resources about basics or setup of the topics in question. Instead of ``what is a \texttt{Maybe} and why use it,'' think ``what are some typical patterns around using \texttt{Maybes} in a real codebase.'' Instead of ``what is property-based testing'', think ``here are best practices around choosing properties to test.'' Since there are already plenty of good introductory resources on things like ``how do I get started with QuickCheck'', we'll focus here instead on how best to use the tools we have.

Posts in each section are roughly ordered by difficulty.


\part{Posts on designing and structuring code}

\input{matt_parsons.tex}


\input{david_luposchainsky.tex}


\input{alexis_king.tex}


\input {jasper_van_der_jeugt.tex}


\input {tom_ellis.tex}

\input{michael_snoyman.tex}


\input{matt_parsons2.tex}


\input{sandy_maguire.tex}



\part{Posts on testing}


\input {jasper_van_der_jeugt2.tex}



\chapter{Property-Based Testing in a Screencast Editor: Introduction - Oskar Wickström}

\begin{quotation}
\noindent\textit{\textbf{William Yao:}}
\textit{Probably the best series of posts I've read about using property-based testing in practice. Lots of interesting tricks and techniques explored. Highly recommended.}

\vspace{\baselineskip}
\noindent\textit{Original article: \cite{screencast_introduction}}
\end{quotation}
This is the first in a series of posts about using property-based testing (PBT) within \textit{Komposition}, a screencast editor that I've been working on during the last year. It introduces PBT and highlights some challenges in testing properties of an application like Komposition.

Future posts will focus on individual case studies, covering increasingly complex components and how they are tested. I'll reflect on what I've learned in each case, what bugs the tests have found, and what still remains to be improved.

For example, I'll explain how using PBT helped me find and fix bugs in the specification and implementation of Komposition's video classifier. Those were bugs that would be very hard to find using example-based tests or using a static type system!

This series is not a tutorial on PBT, but rather a collection of motivating examples. That said, you should be able to follow along without prior knowledge of PBT.

\section{Komposition}


In early 2018 I started producing \href{https://haskell-at-work.com/}{Haskell screencasts}. A majority of the work involved cutting and splicing video by hand in a \href{https://en.wikipedia.org/wiki/Non-linear_editing_system}{non-linear editing system (NLE)} like \href{https://en.wikipedia.org/wiki/Adobe_Premiere_Pro}{Premiere Pro} or \href{https://kdenlive.org/en/}{Kdenlive}. I decided to write a screencast editor specialized for my needs, reducing the amount of manual labor needed to edit the recorded material. Komposition was born.

Komposition is a modal GUI application built for editing screencasts. Unlike most NLE systems, it features a hierarchical timeline, built out of \textit{sequences}, \textit{parallels}, \textit{tracks}, \textit{clips} and \textit{gaps}. To make the editing experience more efficient, it automatically classifies scenes in screen capture video, and sentences in recorded voice-over audio.

If you are curious about Komposition and want to learn more right away, check out its \href{https://owickstrom.github.io/komposition/}{documentation}.
\begin{figure}[htbp]
 \centering
 \includegraphics[width=.95\linewidth]{./pics/komposition-light.png}
 \caption{Komposition's timeline mode}
 \label{fig:komposition_time_line_mode}
\end{figure}
Some of the most complex parts of Komposition include focus and timeline transformations, video classification, video rendering, and the main application logic. Those are the areas in which I've spent most effort writing tests, using a combination of example-based and property-based testing.

I've selected the four most interesting areas where I've applied PBT in Komposition, and I'll cover one in each coming blog post:

\begin{enumerate}
\item Timeline flattening
\item Video scene classification
\item Focus and timeline consistency
\item Symmetry of undo/redo
\end{enumerate}
I hope these case studies will be motivating, and that they will show the value of properties all the way from unit testing to integration testing.

\section{Property-Based Testing}


To get the most out of this series, you need a basic understanding of what PBT is, so let's start there. For my take on a minimal definition, PBT is about:

\begin{enumerate}
\item Specifying your system under test in terms of properties, where properties describe invariants of the system based on its input and output.
\item Testing that those properties hold against a large variety of inputs.
\end{enumerate}
It's worth noting that PBT is not equal to QuickCheck, or any other specific tool, for that matter. The set of inputs doesn't have to be randomly generated. You don't have to use ``shrinking''. You don't have to use a static type system or a functional programming language. PBT is a general idea that can be applied in many ways.

The following resources are useful if you want to learn more about PBT:

\begin{itemize}
\item The \href{https://hypothesis.works/articles/intro/}{introductory articles on Hypothesis}, although specific to Python.
\item \href{https://hypothesis.works/articles/what-is-property-based-testing/}{``What is Property Based Testing?''} by David R. MacIver is a definition of what PBT is, and particularly what it isn't.
\end{itemize}
The code examples will be written in Haskell and using the \href{https://hackage.haskell.org/package/hedgehog}{Hedgehog} testing system. You don't have to know Haskell to follow this series, as I'll explain the techniques primarily without code. But if you are interested in the Haskell specifics and in Hedgehog, check out \href{https://teh.id.au/posts/2017/04/23/property-testing-with-hedgehog/}{``Property testing with Hedgehog''} by Tim Humphries.

\section{Properties of the Ugly Parts}


When I started with PBT, I struggled with applying it to anything beyond simple functions. Examples online are often focused on the fundamentals. They cover concepts like reversing lists, algebraic laws, and symmetric encoders and decoders. Those are important properties to test, and they are good examples for teaching the foundations of PBT.

I wanted to take PBT beyond pure and simple functions, and leverage it on larger parts of my system. The ``ugly'' parts, if you will. In my experience, the complexity of a system often becomes much higher than the sum of its parts. The way subsystems are connected and form a larger graph of dependencies drives the need for integration testing at an application level.

Finding resources on integration testing using PBT is hard, and it might drive you to think that PBT is not suited for anything beyond the introductory examples. With the case studies in this blog series I hope to contribute to debunking such misconceptions.

\section{Designing for Testability}


In my case, it's a desktop multimedia application. What if we're working on a backend that connects to external systems and databases? Or if we're writing a frontend application with a GUI driven by user input? In addition to these kinds of systems being hard to test at a high level due to their many connected subsystems, they usually have stateful components, side effects, and non-determinism. How do we make such systems testable with properties?

Well, the same way we would design our systems to be testable with examples. Going back to \href{https://testing.googleblog.com/2008/08/by-miko-hevery-so-you-decided-to.html}{``Writing Testable Code''} by Mi\v{s}ko Hevery from 2008, and Kent Beck's \href{https://www.amazon.com/Test-Driven-Development-Kent-Beck/dp/0321146530}{``Test-Driven Development by Example''} from 2003, setting aside the OOP specifics, many of their guidelines apply equally well to code tested with properties:

\begin{description}
\item[Determinism:] Make it possible to run the ``system under test'' deterministically, such that your tests can be reliable. This does not mean the code has to be pure, but you might need to stub or otherwise control side effects during your tests.
\item[No global state:] In order for tests to be repeatable and independent of execution order, you might have to rollback database transactions, use temporary directories for generated files, stub out effects, etc.
\item[High cohesion:] Strive for modules of high cohesion, with smaller units each having a single responsibility. Spreading closely related responsibilities thin across multiple modules makes the implementation harder to maintain and test.
\item[Low coupling:] Decrease coupling between interface and implementation. This makes it easier to write tests that don't depend on implementation details. You may then modify the implementation without modifying the corresponding tests.
\end{description}I find these guidelines universal for writing testable code in any programming language I've used professionally, regardless of paradigm or type system. They apply to both example-based and property-based testing.

\section{Patterns for Properties}


Great, so we know how to write testable code. But how do we write properties for more complex units, and even for integration testing? There's not a lot of educational resources on this subject that I know of, but I can recommend the following starting points:

\begin{itemize}
\item \href{https://fsharpforfunandprofit.com/posts/property-based-testing-2/}{``Choosing properties for property-based testing''} by Scott Wlaschin, giving examples of properties within a set of common categories.
\item The talk \href{https://www.youtube.com/watch?v=shngiiBfD80}{``Property-Based Testing for Better Code''} by Jessica Kerr, with examples of generating valid inputs and dealing with timeouts.
\end{itemize}
Taking a step back, we might ask ``Why it's so hard to come up with these properties?'' I'd argue that it's because doing so forces us to understand our system in a way we're not used to. It's challenging understanding and expressing the general behavior of a system, rather than particular \textit{anecdotes} that we've observed or come up with.

If you want to get better at writing properties, the only advice I can give you (in addition to studying whatever you can find in other projects) is to \textit{practice}. Try it out on whatever you're working on. Talk to your colleagues about using properties in addition to example-based tests at work. Begin at a smaller scale, testing simple functions, and progress towards testing larger parts of your system once you're comfortable. It's a long journey, filled with reward, surprise, and joy!

\section{Testing Case Studies}


With a basic understanding of PBT, how we can write testable code, and how to write properties for our system under test, we're getting ready to dive into the case studies:

\begin{enumerate}
\item Introduction (this chapter)
\item Timeline Flattening (see chapter \ref{sec:timeline_flattening})
\item Video Scene Classification (see chapter \ref{sec:video_scene_classification})
\item Integration Testing (see chapter \ref{sec:integration_testing})
\end{enumerate}


\section{Credits}

Thank you Chris Ford, Alejandro Serrano Mena, Tobias Pflug, Hillel Wayne, and Ulrik Sandberg for kindly providing your feedback on my drafts!


\chapter{Property-Based Testing in a Screencast Editor, Case Study 1: Timeline Flattening - Oskar Wickström}
\label{sec:timeline_flattening}


\chapter{Property-Based Testing in a Screencast Editor, Case Study 2: Video Scene Classification - Oskar Wickström}
\label{sec:video_scene_classification}


\chapter{Property-Based Testing in a Screencast Editor, Case Study 3: Integration Testing - Oskar Wickström}
\label{sec:integration_testing}



\appendix							% Beginn des Anhangs


%% Bibliographie unter Verwendung von dinnat %%%%%%%%%%%%%%%%%%%%%%%%%%
%\setbibpreamble{Präambel}		% Text vor dem Verzeichnis
\bibliographystyle{plain}
\bibliography{HaskellArticles}	% Sie benötigen einen *.bib-Datei



\end{document}
